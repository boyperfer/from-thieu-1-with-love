{"ast":null,"code":"import _slicedToArray from \"/Users/vnfreedomboy/Desktop/from-thieu-1-with-love/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/vnfreedomboy/Desktop/from-thieu-1-with-love/client/src/components/video-t1/video-t1.component.jsx\";\nimport React, { useRef, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { selectIsFetchingVideo, selectLinkVideo } from '../../redux/video-t1/video-t1.selectors';\nimport WebVTT from '../../assets/video/subtitle-vn.vtt';\nimport { VideoContainer, VideoContent, VideoSource } from './video-t1.style';\n\nconst VideoT1 = () => {\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        system = _useState2[0],\n        setSystem = _useState2[1];\n\n  const videoRef = useRef(null);\n  const linkVideo = useSelector(selectLinkVideo);\n  const isFetchingVideo = useSelector(selectIsFetchingVideo);\n  useEffect(() => {\n    videoRef.current.src = linkVideo;\n    return () => {};\n  }, [linkVideo]);\n  useEffect(() => {\n    const getMobileOperatingSystem = () => {\n      var userAgent = navigator.userAgent || navigator.vendor || window.opera; // Windows Phone must come first because its UA also contains \"Android\"\n\n      if (/windows phone/i.test(userAgent)) {\n        return 'Windows Phone';\n      }\n\n      if (/android/i.test(userAgent)) {\n        return 'Android';\n      } // iOS detection from: http://stackoverflow.com/a/9039885/177710\n\n\n      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\n        return 'iOS';\n      }\n\n      return 'unknown';\n    };\n\n    setSystem(getMobileOperatingSystem());\n    return () => {};\n  }, [system]);\n\n  const timeOut = ms => {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  };\n\n  useEffect(() => {\n    const getTrack = async () => {\n      try {\n        await timeOut(300);\n        const tracks = await videoRef.current.textTracks;\n        const trackCues = await tracks[0].cues;\n        const trackCuesArray = Object.keys(trackCues).map(key => trackCues[key]);\n        var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n        w < 900 ? trackCuesArray.map(track => {\n          return track.line = 18;\n        }) : w >= 900 && w <= 1600 ? trackCuesArray.map(track => {\n          return track.line = 15;\n        }) : trackCuesArray.map(track => {\n          return track.line = 'auto';\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    !isFetchingVideo ? getTrack() : timeOut(0);\n    return () => {};\n  }, [isFetchingVideo]);\n  return React.createElement(VideoContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(VideoContent, {\n    system: system,\n    controls: true,\n    volume: \"1\",\n    ref: videoRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(VideoSource, {\n    type: \"video/mp4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), React.createElement(\"track\", {\n    kind: \"captions\",\n    src: WebVTT,\n    srcLang: \"VN\",\n    default: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), \"Your browser does not support the video tag.\"));\n};\n\nexport default VideoT1;","map":{"version":3,"sources":["/Users/vnfreedomboy/Desktop/from-thieu-1-with-love/client/src/components/video-t1/video-t1.component.jsx"],"names":["React","useRef","useEffect","useState","useSelector","selectIsFetchingVideo","selectLinkVideo","WebVTT","VideoContainer","VideoContent","VideoSource","VideoT1","system","setSystem","videoRef","linkVideo","isFetchingVideo","current","src","getMobileOperatingSystem","userAgent","navigator","vendor","window","opera","test","MSStream","timeOut","ms","Promise","resolve","setTimeout","getTrack","tracks","textTracks","trackCues","cues","trackCuesArray","Object","keys","map","key","w","Math","max","document","documentElement","clientWidth","innerWidth","track","line","err","console","log"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectIsFetchingVideo, selectLinkVideo } from '../../redux/video-t1/video-t1.selectors';\n\nimport WebVTT from '../../assets/video/subtitle-vn.vtt';\n\nimport { VideoContainer, VideoContent, VideoSource } from './video-t1.style';\n\nconst VideoT1 = () => {\n    const [system, setSystem] = useState('');\n    const videoRef = useRef(null);\n    const linkVideo = useSelector(selectLinkVideo);\n    const isFetchingVideo = useSelector(selectIsFetchingVideo);\n    useEffect(() => {\n        videoRef.current.src = linkVideo;\n        return () => {};\n    }, [linkVideo]);\n    useEffect(() => {\n        const getMobileOperatingSystem = () => {\n            var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n            // Windows Phone must come first because its UA also contains \"Android\"\n            if (/windows phone/i.test(userAgent)) {\n                return 'Windows Phone';\n            }\n\n            if (/android/i.test(userAgent)) {\n                return 'Android';\n            }\n\n            // iOS detection from: http://stackoverflow.com/a/9039885/177710\n            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\n                return 'iOS';\n            }\n\n            return 'unknown';\n        };\n        setSystem(getMobileOperatingSystem());\n        return () => {};\n    }, [system]);\n    const timeOut = ms => {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    };\n    useEffect(() => {\n        const getTrack = async () => {\n            try {\n                await timeOut(300);\n                const tracks = await videoRef.current.textTracks;\n\n                const trackCues = await tracks[0].cues;\n\n                const trackCuesArray = Object.keys(trackCues).map(key => trackCues[key]);\n                var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n                w < 900\n                    ? trackCuesArray.map(track => {\n                          return (track.line = 18);\n                      })\n                    : w >= 900 && w <= 1600\n                    ? trackCuesArray.map(track => {\n                          return (track.line = 15);\n                      })\n                    : trackCuesArray.map(track => {\n                          return (track.line = 'auto');\n                      });\n            } catch (err) {\n                console.log(err);\n            }\n        };\n        !isFetchingVideo ? getTrack() : timeOut(0);\n        return () => {};\n    }, [isFetchingVideo]);\n    return (\n        <VideoContainer>\n            <VideoContent system={system} controls volume='1' ref={videoRef}>\n                <VideoSource type='video/mp4' />\n                <track kind='captions' src={WebVTT} srcLang='VN' default />\n                Your browser does not support the video tag.\n            </VideoContent>\n        </VideoContainer>\n    );\n};\n\nexport default VideoT1;\n"]},"metadata":{},"sourceType":"module"}